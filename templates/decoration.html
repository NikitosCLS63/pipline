{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/decoration.css' %}">

<div class="checkout-container">
    <div class="checkout-header">
        <div class="checkout-logo">SND</div>
        <div class="checkout-steps">
            <div class="step active" data-step="1">
                <span class="step-number">1</span>
                <span class="step-text">–î–∞–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è</span>
            </div>
            <div class="step" data-step="2">
                <span class="step-number">2</span>
                <span class="step-text">–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</span>
            </div>
            <div class="step" data-step="3">
                <span class="step-number">3</span>
                <span class="step-text">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</span>
            </div>
        </div>
    </div>

    <div class="checkout-content">
        <div class="checkout-main">
            <!-- STEP 1: CUSTOMER DATA -->
            <div class="checkout-step active" id="step-1">
                <h2>–î–∞–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è</h2>
                
                <div class="login-section">
                    <p>–£–∂–µ –ø–æ–∫—É–ø–∞–ª–∏ —É –Ω–∞—Å?</p>
                    <a href="#" class="login-link">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</a>
                </div>

                <div class="form-section">
                    <h3>–í–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                    
                    <div class="form-group">
                        <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                        <input type="tel" id="phone" name="phone" placeholder="+7 (999) 123-45-67" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <input type="email" id="email" name="email" placeholder="your@email.com">
                    </div>

                    <div class="form-group">
                        <label for="first_name">–ò–º—è *</label>
                        <input type="text" id="first_name" name="first_name" placeholder="–ò–≤–∞–Ω" required>
                    </div>

                    <div class="form-group">
                        <label for="last_name">–§–∞–º–∏–ª–∏—è *</label>
                        <input type="text" id="last_name" name="last_name" placeholder="–ò–≤–∞–Ω–æ–≤" required>
                    </div>
                </div>

                <div class="form-actions">
                    <button class="btn btn-primary" onclick="goToStep(2)">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- STEP 2: DELIVERY METHOD -->
            <div class="checkout-step" id="step-2">
                <h2>–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</h2>

                <div class="delivery-options">
                    <div class="delivery-option">
                        <input type="radio" id="delivery-courier" name="delivery_type" value="courier" checked>
                        <label for="delivery-courier" class="delivery-label">
                            <span class="delivery-title">üöö –ö—É—Ä—å–µ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</span>
                            <span class="delivery-price">–æ—Ç 349 ‚ÇΩ</span>
                        </label>
                    </div>

                    <!-- pickup option removed: only courier delivery is available -->
                </div>

                <!-- ADDRESS INPUT (for courier delivery) -->
                <div id="address-section" style="display: block;">
                    <h3>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
                    
                    <div class="form-group">
                        <label for="country">–°—Ç—Ä–∞–Ω–∞ *</label>
                        <input type="text" id="country" name="country" placeholder="–†–æ—Å—Å–∏—è" value="–†–æ—Å—Å–∏—è" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group flex-1">
                            <label for="region">–û–±–ª–∞—Å—Ç—å/—Ä–µ–≥–∏–æ–Ω *</label>
                            <input type="text" id="region" name="region" placeholder="–ú–æ—Å–∫–≤–∞" required>
                        </div>
                        <div class="form-group flex-1">
                            <label for="city">–ì–æ—Ä–æ–¥ *</label>
                            <input type="text" id="city" name="city" placeholder="–ú–æ—Å–∫–≤–∞" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group flex-2">
                            <label for="street">–£–ª–∏—Ü–∞ *</label>
                            <input type="text" id="street" name="street" placeholder="–£–ª. –ü—É—à–∫–∏–Ω–∞" required>
                        </div>
                        <div class="form-group flex-1">
                            <label for="house">–î–æ–º *</label>
                            <input type="text" id="house" name="house" placeholder="123" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group flex-1">
                            <label for="apartment">–ö–≤–∞—Ä—Ç–∏—Ä–∞/–æ—Ñ–∏—Å</label>
                            <input type="text" id="apartment" name="apartment" placeholder="45">
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="goToStep(1)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn btn-primary" onclick="goToStep(3)">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- STEP 3: PAYMENT METHOD -->
            <div class="checkout-step" id="step-3">
                <h2>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h2>

                <div class="payment-options">
                    <div class="payment-option">
                        <input type="radio" id="payment-online" name="payment_type" value="online" checked>
                        <label for="payment-online" class="payment-label">
                            <span class="payment-title">üí≥ –û–ø–ª–∞—Ç–∞ —Å—Ä–∞–∑—É (–æ–Ω–ª–∞–π–Ω)</span>
                            <span class="payment-description">–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Å—Å—É –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π</span>
                        </label>
                    </div>

                    <div class="payment-option">
                        <input type="radio" id="payment-on-delivery" name="payment_type" value="on_delivery">
                        <label for="payment-on-delivery" class="payment-label">
                            <span class="payment-title">üíµ –û–ø–ª–∞—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</span>
                            <span class="payment-description">–û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –∏–ª–∏ –∫–∞—Ä—Ç–æ–π –∫—É—Ä—å–µ—Ä—É –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ</span>
                        </label>
                    </div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç—ã -->
                <div class="payment-section" id="online-payment-info">
                    <h3>üí≥ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Å—Å–∞</h3>
                    <p class="payment-description">–ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑", –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –∑–∞—â–∏—â—ë–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –Ø–Ω–¥–µ–∫—Å.–ö–∞—Å—Å–∞ –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –≤–∞—à–µ–π –∫–∞—Ä—Ç—ã.</p>

                    <div class="security-info">
                        <div class="security-item">
                            <i>üîí</i>
                            <span><strong>–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:</strong> –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã SSL</span>
                        </div>
                        <div class="security-item">
                            <i>‚úì</i>
                            <span><strong>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏:</strong> –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å.–ö–∞—Å—Å–∞</span>
                        </div>
                        <div class="security-item">
                            <i>üí≥</i>
                            <span><strong>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–∞—Ä—Ç—ã:</strong> Visa, Mastercard, –ú–ò–†</span>
                        </div>
                    </div>

                    <div class="payment-note">
                        ‚ÑπÔ∏è –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –∑–∞—â–∏—â—ë–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –≤–≤–æ–¥—è—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Å—Å—ã –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞ –Ω–∞—à —Å–µ—Ä–≤–µ—Ä.
                    </div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ–ø–ª–∞—Ç—ã –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ -->
                <div class="payment-section" id="delivery-payment-info" style="display: none;">
                    <h3>üíµ –û–ø–ª–∞—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</h3>
                    <p class="payment-description">–í—ã —Å–º–æ–∂–µ—Ç–µ –æ–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –∏–ª–∏ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π –∫—É—Ä—å–µ—Ä—É –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ.</p>

                    <div class="security-info">
                        <div class="security-item">
                            <i>üì¶</i>
                            <span><strong>–£–¥–æ–±–Ω–æ:</strong> –û–ø–ª–∞—Ç–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞</span>
                        </div>
                        <div class="security-item">
                            <i>üí≥</i>
                            <span><strong>–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:</strong> –ù–∞–ª–∏—á–Ω—ã–µ –∏–ª–∏ –∫–∞—Ä—Ç–∞ –∫—É—Ä—å–µ—Ä—É</span>
                        </div>
                        <div class="security-item">
                            <i>‚úì</i>
                            <span><strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ:</strong> –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–≤–∞—Ä –ø–µ—Ä–µ–¥ –æ–ø–ª–∞—Ç–æ–π</span>
                        </div>
                    </div>

                    <div class="payment-note">
                        ‚ÑπÔ∏è –ó–∞–∫–∞–∑ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω. –û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ –∫—É—Ä—å–µ—Ä–æ–º.
                    </div>
                </div>

                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="goToStep(2)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn btn-primary" id="submit-order-btn" onclick="submitOrder()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </div>
        </div>

        <!-- ORDER SUMMARY (RIGHT SIDEBAR) -->
        <div class="checkout-sidebar">
            <div class="order-summary">
                <h3>–í–∞—à –∑–∞–∫–∞–∑</h3>

                <div class="summary-items" id="summary-items">
                    <!-- Items will be loaded here -->
                </div>

                <div class="summary-divider"></div>

                <div class="summary-line">
                    <span>–¢–æ–≤–∞—Ä—ã:</span>
                    <span id="summary-subtotal">0 ‚ÇΩ</span>
                </div>

                <div class="summary-line">
                    <span>–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                    <span id="summary-delivery">–æ—Ç 349 ‚ÇΩ</span>
                </div>

                <div class="summary-total">
                    <span>–ò—Ç–æ–≥–æ:</span>
                    <span id="summary-total">0 ‚ÇΩ</span>
                </div>

                <button class="btn btn-outline" onclick="window.location.href='/cart/'">
                    ‚Üê –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑
                </button>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'js/theme-toggle.js' %}"></script>
<script src="{% static 'js/decoration.js' %}"></script>
{% endblock %}
